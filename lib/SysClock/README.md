# Модуль sys_clock

## Краткое описание модуля

Модуль sys_clock предоставляет функции для работы с системным таймером. Он позволяет задерживать выполнение программы на определенное количество миллисекунд и обрабатывать прерывание от системного таймера.

## Краткий перечень доступных функций и структур

- `void delay_ms(SYS_TICK *sys_tick, uint32_t ms)` - Функция задержки выполнения программы на указанное количество миллисекунд.
- `void SysTickHandler(SYS_TICK *sys_tick)` - Обработчик прерывания от системного таймера.

## Описание реализации функций и структур

### Функция `delay_ms`

```c
void delay_ms(SYS_TICK *sys_tick, uint32_t ms)
{
  sys_tick->SysTick_CNT = ms;
  while (sys_tick->SysTick_CNT)
    ;
}
```

Функция `delay_ms` устанавливает значение счетчика системного таймера в количество миллисекунд, заданных параметром `ms`. Затем она ожидает, пока значение счетчика не станет равным нулю, что гарантирует задержку выполнения программы на указанное количество миллисекунд.

### Функция `SysTickHandler`

```c
void SysTickHandler(SYS_TICK *sys_tick)
{
  if (sys_tick->SysTick_CNT > 0)
    sys_tick->SysTick_CNT--;
}
```

Функция `SysTickHandler` является обработчиком прерывания от системного таймера. Она проверяет значение счетчика системного таймера `sys_tick->SysTick_CNT`. Если оно больше нуля, уменьшает его на единицу.

## Пример использования модуля

```c
#include "sys_clock.h"

SYS_TICK sys_tick;

void SysTick_Handler(void)
{
  SysTickHandler(&sys_tick);
}

int main()
{

  // Задержка выполнения программы на 1000 миллисекунд (1 секунда)
  delay_ms(&sys_tick, 1000);

  // ...

  return 0;
}
```

В данном примере мы подключаем заголовочный файл `sys_clock.h` и создаем экземпляр структуры `SYS_TICK` с именем `sys_tick`. Затем вызываем функцию `delay_ms`, передавая ей указатель на `sys_tick` и количество миллисекунд для задержки. После задержки выполнения программы на 1 секунду, программа продолжит свое выполнение.
